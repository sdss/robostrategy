#!/usr/bin/env python
# encoding: utf-8
#
# @Author: Michael R. Blanton
# @Date: Dec 3, 2019
# @Filename: rs_test_multi
# @License: BSD 3-Clause
# @Copyright: Michael R. Blanton


from __future__ import division
from __future__ import print_function
from __future__ import absolute_import
from __future__ import unicode_literals

import multiprocessing
import numpy as np


def f(x):
    b[x] = a[x] * a[x]
    print(b[x])
    return

if __name__ == '__main__':

    print(multiprocessing.cpu_count())

    a = np.arange(100) + 2
    b = np.zeros(100)

    with multiprocessing.Pool() as pool:
        pool.map(f, np.arange(100))

    print(b)
